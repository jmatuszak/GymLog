@using GymLog.Data.Enum
@using GymLog.ViewModels
@model TemplateVM

    <input asp-for="Id" type="hidden" class="form-control">
    <input asp-for="ActionName" type="hidden" class="form-control">


    <div class="form-group">
        <label asp-for="Name">Name</label>
        <input asp-for="Name" class="form-control" placeholder="Name">
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>

    <div class="form-group">
    @{
        if(Model.TemplateSegmentsVM != null)
        {
            @for (int i = 0; i < Model.Excercises.Count; i++)
            {
                <input asp-for="Excercises[i].Id" type="hidden" class="form-control">
                <input asp-for="Excercises[i].Name" type="hidden" class="form-control">

            }

            for (int i = 0; i < Model.TemplateSegmentsVM.Count; i++)
            {
                <div id="segment">

                    <div class="form-group">
                        <label asp-for="@Model.TemplateSegmentsVM[i].ExcerciseId">Excercise</label>
                        <select asp-for="@Model.TemplateSegmentsVM[i].ExcerciseId"
                    asp-items="new SelectList(@Model.Excercises, nameof(Excercise.Id),
                    nameof(Excercise.Name))">
                            <option>Select Excercise</option>
                        </select>
                        <span asp-validation-for="@Model.TemplateSegmentsVM[i].Excercise" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="@Model.TemplateSegmentsVM[i].WeightType">Weight Type</label>
                        <select asp-for="@Model.TemplateSegmentsVM[i].WeightType" asp-items="@Html.GetEnumSelectList<WeightType>()">
                            <option>Select WeightType</option>
                        </select>
                        <span asp-validation-for="@Model.TemplateSegmentsVM[i]WeightType" class="text-danger"></span>
                    </div>
                    <input asp-for="TemplateSegmentsVM[i].Id" type="hidden" class="form-control">

                    <div class="form-group">
                        <label asp-for="@Model.TemplateSegmentsVM[i].Description">Description</label>
                        <input asp-for="@Model.TemplateSegmentsVM[i].Description" class="form-control" placeholder="Description">
                        <span asp-validation-for="@Model.TemplateSegmentsVM[i].Description" class="text-danger"></span>
                    </div>
                    <input asp-for="@Model.TemplateSegmentsVM[i].TemplateId" type="hidden" class="form-control">
                    @for (int j = 0; j < Model.TemplateSegmentsVM.Count; j++)
                    {
                        <input asp-for="@Model.TemplateSegmentsVM[j].Id" type="hidden" class="form-control" placeholder="TemplateSegmentsVM[j].Id">

                    }

                    @if (@Model.TemplateSegmentsVM[i].SetsVM != null)
                    {
                        <table>
                            <tr>
                                <th width="7%">Set</th>
                                <th>Weight</th>
                                <th>Reps</th>
                            </tr>
                            @for (int j = 0; j < @Model.TemplateSegmentsVM[i].SetsVM.Count; j++)
                            {
                                <input asp-for="@Model.TemplateSegmentsVM[i].SetsVM[j].Id" type="hidden" class="form-control">
                                <input asp-for="@Model.TemplateSegmentsVM[i].SetsVM[j].TemplateSegmentId" type="hidden" class="form-control">

                                <tr>
                                    <td>@(j + 1)</td>
                                    <td>
                                        <div class="form-group">
                                            <input asp-for="@Model.TemplateSegmentsVM[i].SetsVM[j].Weight" class="form-control" placeholder="Weight">
                                            <span asp-validation-for="@Model.TemplateSegmentsVM[i].SetsVM[j].Weight" class="text-danger"></span>
                                        </div>
                                    </td>


                                    <td>
                                        <div class="form-group">
                                            <input asp-for="@Model.TemplateSegmentsVM[i].SetsVM[j].Reps" class="form-control" placeholder="Reps">
                                            <span asp-validation-for="@Model.TemplateSegmentsVM[i].SetsVM[j].Reps" class="text-danger"></span>
                                        </div>
                                    </td>
                                </tr>
                                <input asp-for="@Model.TemplateSegmentsVM[i].SetsVM[j].Id" type="hidden" class="form-control">
                            }
                        </table>
                    }
                    <button type="submit" formaction="/Template/AddSet?segment=@i" class="btn btn-outline-primary">+</button>
                    <button type="submit" formaction="/Template/RemoveSet?segment=@i" class="btn btn-outline-danger">-</button>

                </div>
            }
            
        }
    }
    
    </div>
    </br>


    <button type="submit" formaction="/Template/AddTemplateSegment" class="btn btn-outline-primary">Add Excercise</button>
    